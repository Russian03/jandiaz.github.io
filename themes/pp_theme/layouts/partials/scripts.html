<script>
// Image Modal Functionality
// Progressive enhancement - works without JS, enhanced with JS

function openImageModal(imgElement) {
  const modal = document.getElementById('imageModal');
  const modalImg = document.getElementById('modalImage');
  
  if (!modal || !modalImg) return;
  
  // Get full-size image URL (use data-full-image if available, fallback to src)
  const fullImageUrl = imgElement.dataset.fullImage || imgElement.src;
  
  modalImg.src = fullImageUrl;
  modalImg.alt = imgElement.alt;
  modal.classList.add('active');
  
  // Trap focus in modal
  modal.focus();
  
  // Prevent body scroll
  document.body.style.overflow = 'hidden';
}

function closeImageModal(event) {
  // Close if clicking background or close button
  if (event.target.id === 'imageModal' || 
      event.target.classList.contains('image-modal-close') ||
      event.target.closest('.image-modal-close')) {
    
    const modal = document.getElementById('imageModal');
    if (modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    event.stopPropagation();
  }
}

// Close modal on Escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const modal = document.getElementById('imageModal');
    if (modal && modal.classList.contains('active')) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }
  }
});

// Smooth scroll for skip link
document.addEventListener('DOMContentLoaded', function() {
  const skipLink = document.querySelector('.skip-link');
  if (skipLink) {
    skipLink.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.focus();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  }
});

// Optional: Add smooth reveal animations on scroll
// (Progressive enhancement - page works without this)
if ('IntersectionObserver' in window) {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);
  
  // Observe news items for scroll animations
  document.querySelectorAll('.news-item').forEach(item => {
    item.style.opacity = '0';
    item.style.transform = 'translateY(20px)';
    item.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(item);
  });
}
</script>